angular.module("Inprotech").factory("errorHandlingInterceptor",["$q","$window","$rootScope","url","localise",function(a,b,c,d,e){"use strict";var f=function(a,b){var d,f;500===a&&b?(d=e.getString("gErrorCommsCorrelated500"),f=b):d=e.getString("gErrorComms"+a)||e.getString("gErrorCommsOther"),c.$broadcast("globalNotification",{type:"error",title:d,token:f})};return{request:function(b){return b||a.when(b)},requestError:function(b){return f(1),a.reject(b)},responseError:function(c){if(401===c.status)b.location=d.of("signin/#/?goto="+encodeURIComponent(b.location));else{var e=c.config.timeout&&c.config.timeout.cancelled,g=c.config.handlesError,h=c.data||{};e||g===!0||_.isObject(g)&&g(h,c.status,c)||f(0===c.status?1:c.status,h.correlationId)}return a.reject(c)}}}]),angular.module("Inprotech").factory("processEnrichmentInterceptor",["$q","$rootScope",function(a,b){"use strict";return{response:function(c){return c.data&&(b.user=c.data.intendedFor||b.user||{preferences:{}},b.userAgent=c.data.userAgent||b.userAgent||{languages:[]},b.systemInfo=c.data.systemInfo||b.systemInfo||{},c.data=c.data.result||c.data),c||a.when(c)}}}]),angular.module("Inprotech").directive("ajaxForm",function(){"use strict";return{restrict:"A",replace:!1,scope:{onComplete:"="},link:function(a,b){var c="ajax-iframe-"+ +new Date,d=$('<iframe src="about:blank" id="'+c+'" name="'+c+'" style="display:none" />');$("body").append(d),b.attr("target",c),b.submit(function(){d.unbind("load").bind("load",function(){var b,c=d.contents().find("body").text();try{b=$.parseJSON(c)}catch(e){b={result:"unexpected-error"}}a.$apply(function(){a.onComplete.call(this,b)})})})}}}),angular.module("Inprotech").directive("scroll",function(){"use strict";function a(a,b,c){a.$watch(c.scroll,function(a){b.scrollTop(a)}),b.on("$destroy",function(){b.unbind()}),b.bind("scroll",function(){a.$apply(function(){a[c.scroll]=b.scrollTop()})})}return{restrict:"A",link:a}}),angular.module("Inprotech.Localisation").factory("localisedResourcesInterceptor",["$q","localise",function(a,b){"use strict";return{response:function(c){return c.data&&b.replace(c.data.__resources),c||a.when(c)}}}]),angular.module("Inprotech.FinancialReports",["Inprotech"]).config(["$routeProvider","routeConfigurationProvider",function(a,b){"use strict";var c={apiBaseUrl:"../api/reports/"};a.when("/",b.configure("financial-reports.html","availableReportsController",c))}]),angular.module("Inprotech.FinancialReports").run(["localise",function(a){a.initialize({nbReturnToInprotech:"Return to Inprotech Home",nbLogout:"Logout",_:null})}]),angular.module("Inprotech").controller("mainController",["$scope","$http","$location",function(a,b,c){}]),angular.module("Inprotech.FinancialReports").controller("availableReportsController",["$scope","$http","viewInitialiser","url",function(a,b,c,d){a.categorisedReports=[],a.categorisedReports=c.viewData,a.downloadLink=function(a){return d.of("api/reports/report/"+a)}}]);